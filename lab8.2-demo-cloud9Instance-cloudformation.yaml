Resources:
  Instance:
    Type: 'AWS::EC2::Instance'
    Properties:
      ImageId: ami-059a30df01b26a209
      InstanceType: t2.micro
      UserData: >-
        IyEvYmluL2Jhc2gKClVOSVhfVVNFUj0iZWMyLXVzZXIiClVOSVhfVVNFUl9IT01FPSIvaG9tZS9lYzItdXNlciIKRU5WSVJPTk1FTlRfUEFUSD0iL2hvbWUvZWMyLXVzZXIvZW52aXJvbm1lbnQiClVOSVhfR1JPVVA9JChpZCAtZyAtbiAiJFVOSVhfVVNFUiIpCgojIEFwcGx5IHNlY3VyaXR5IHBhdGNoZXMKT1BFUkFUSU5HX1NZU1RFTT0kKGF3ayAtRj0gJyQxPT0iSUQiIHsgcHJpbnQgJDIgO30nIC9ldGMvb3MtcmVsZWFzZSB8IHNlZCAtZSAncy9eIi8vJyAtZSAncy8iJC8vJykKaWYgWyAiJE9QRVJBVElOR19TWVNURU0iID09ICJhbXpuIiBdOyB0aGVuCiAgICB5dW0gLXEgLXkgdXBkYXRlIC0tc2VjdXJpdHkgPiAvdG1wL2luaXQteXVtLXVwZGF0ZS1zZWN1cml0eSAyPiYxICYKZWxpZiBbICIkT1BFUkFUSU5HX1NZU1RFTSIgPT0gInVidW50dSIgXTsgdGhlbgogICAgdW5hdHRlbmRlZC11cGdyYWRlICYKZmkKCiMgYWRkIFNTSCBrZXkKaW5zdGFsbCAtZyAiJFVOSVhfR1JPVVAiIC1vICIkVU5JWF9VU0VSIiAtbSA3NTUgLWQgIiRVTklYX1VTRVJfSE9NRSIvLnNzaApjYXQgPDwnRU9GJyA+PiAiJFVOSVhfVVNFUl9IT01FIi8uc3NoL2F1dGhvcml6ZWRfa2V5cwojIEltcG9ydGFudAojIC0tLS0tLS0tLQojIFRoZSBmb2xsb3dpbmcgcHVibGljIGtleSBpcyByZXF1aXJlZCBieSBDbG91ZDkgSURFCiMgUmVtb3ZpbmcgdGhpcyBrZXkgd2lsbCBtYWtlIHRoaXMgRUMyIGluc3RhbmNlIGluYWNjZXNzaWJsZSBieSB0aGUgSURFCiMKY2VydC1hdXRob3JpdHkgc3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFDQVFENVBXVVlQT0d3enlRSFZ0WUJ0K3k5RmdDS1NBNDB6S1VhcDVVZ25EUVh1SnBKQzl4NXpsMWNDNGRBS2RQdVZsbXk2aDluRmlWZDh3QW0yd2FIeTdXdkxBNEh6cEVySHlFZDl4TytSaGNYNHFzdXN6L0xQcGo2L3dCdFFVVlE5Q0xadE8zQmJrMHM1Zkd4bkNJd0R3bXJKdXVNQ2NiZXJhaDlMT1kwcWx6SGRPb2ZCa1BoZkRrRU4rU1hUYVY1RHlDVjVkZml1UWlCVHVIMUtuekFFVzd6Z1Q4Tmt6Nng5ejVybjZNNmJtcW9iLzFrVVgxSnVmNWtlTW9FTzEzZE9qc2JZZUZiODZJaG43a2t0QnIwbUV0SnQyaDBrLzF3eXhQSVNhUWNqbUp4dnQwcWtMQ2l0STVZN0ZQd1FaYXJGSVJrOTJJNlVsT0JLaTd3KzJzemkvbkRHTkczNWNWTW95TW1Xb2JmcjBDM0dENjhZNE1CQzUzYW5XcEJLMjkydkhITTNOYnBIeGxsZGdXaWhKZG44SXJ6OGVsUHZsWjkxK1IzR0dPWnBUMnBqdkN6cTRBdVFFU0lQSU9RWFRuN2srbVhRcjFtZ2NJcVBhRGwwQ1Y2YlFGeG9hSHRPcjQwWTlpVUtwdzRqYUhQNE5XQ2ZHWHVEeXJneHR0eE1NUGFYSzVtS3A0S1NtRmZTMkUyKzRHdWg1aTJqcm8zQk4xSXZKNDY1M3cya003OE1VU3JrWUZHYjdGbjM1RXNBSUN1ODJhZk1LeHJ6a0ZLWGdYOXFTbDFUTlN4L21aR2lSYmZXMTI1b1B6S2k2WU84YWhJRDB4cWg3cmFldHQwY3IrcElWRWhpZm5SYnhTa21GaEUzc2dMRnZGUjN1cWJNRk1vbW4yZXY4dGpneXh5bHc9PSBlYmY1ZDEyNTM5ZjA0YzZiOGZlYmI3MzE0NWE3MDUzNkBjbG91ZDkuYW1hem9uLmNvbQoKCiMKIyBBZGQgYW55IGFkZGl0aW9uYWwga2V5cyBiZWxvdyB0aGlzIGxpbmUKIwoKRU9GCgojIGFsbG93IGF1dG9tYXRpYyBzaHV0ZG93bgplY2hvICIkVU5JWF9VU0VSICAgIEFMTD0oQUxMKSBOT1BBU1NXRDogL3NiaW4vcG93ZXJvZmYsIC9zYmluL3JlYm9vdCwgL3NiaW4vc2h1dGRvd24iID4+IC9ldGMvc3Vkb2VycwoKbG4gLXMgL29wdC9jOSAiJFVOSVhfVVNFUl9IT01FIi8uYzkKY2hvd24gLVIgIiRVTklYX1VTRVIiOiIkVU5JWF9HUk9VUCIgIiRVTklYX1VTRVJfSE9NRSIvLmM5IC9vcHQvYzkKaW5zdGFsbCAtZyAiJFVOSVhfR1JPVVAiIC1vICIkVU5JWF9VU0VSIiAtbSA3NTUgLWQgIiRFTlZJUk9OTUVOVF9QQVRIIgoKaWYgWyAiJEVOVklST05NRU5UX1BBVEgiID09ICIvaG9tZS9lYzItdXNlci9lbnZpcm9ubWVudCIgXSAmJiBncmVwICJhbGlhcyBweXRob249cHl0aG9uMjciICIkVU5JWF9VU0VSX0hPTUUiLy5iYXNocmM7IHRoZW4KCiAgICBjYXQgPDwnRU9GJyA+ICIkVU5JWF9VU0VSX0hPTUUiLy5iYXNocmMKIyAuYmFzaHJjCgpleHBvcnQgUEFUSD0kUEFUSDokSE9NRS8ubG9jYWwvYmluOiRIT01FL2JpbgoKIyBsb2FkIG52bQpleHBvcnQgTlZNX0RJUj0iJEhPTUUvLm52bSIKWyAiJEJBU0hfVkVSU0lPTiIgXSAmJiBucG0oKSB7CiAgICAjIGhhY2s6IGF2b2lkIHNsb3cgbnBtIHNhbml0eSBjaGVjayBpbiBudm0KICAgIGlmIFsgIiQqIiA9PSAiY29uZmlnIGdldCBwcmVmaXgiIF07IHRoZW4gd2hpY2ggbm9kZSB8IHNlZCAicy9iaW5cL25vZGUvLyI7CiAgICBlbHNlICQod2hpY2ggbnBtKSAiJEAiOyBmaQp9CiMgWyAtcyAiJE5WTV9ESVIvbnZtLnNoIiBdICYmIC4gIiROVk1fRElSL252bS5zaCIgICMgVGhpcyBsb2FkcyBudm0KcnZtX3NpbGVuY2VfcGF0aF9taXNtYXRjaF9jaGVja19mbGFnPTEgIyBwcmV2ZW50IHJ2bSBjb21wbGFpbnRzIHRoYXQgbnZtIGlzIGZpcnN0IGluIFBBVEgKdW5zZXQgbnBtICMgZW5kIGhhY2sKCgojIFVzZXIgc3BlY2lmaWMgYWxpYXNlcyBhbmQgZnVuY3Rpb25zCmFsaWFzIHB5dGhvbj1weXRob24yNwoKIyBtb2RpZmljYXRpb25zIG5lZWRlZCBvbmx5IGluIGludGVyYWN0aXZlIG1vZGUKaWYgWyAiJFBTMSIgIT0gIiIgXTsgdGhlbgogICAgIyBTZXQgZGVmYXVsdCBlZGl0b3IgZm9yIGdpdAogICAgZ2l0IGNvbmZpZyAtLWdsb2JhbCBjb3JlLmVkaXRvciBuYW5vCgogICAgIyBUdXJuIG9uIGNoZWNrd2luc2l6ZQogICAgc2hvcHQgLXMgY2hlY2t3aW5zaXplCgogICAgIyBrZWVwIG1vcmUgaGlzdG9yeQogICAgc2hvcHQgLXMgaGlzdGFwcGVuZAogICAgZXhwb3J0IEhJU1RTSVpFPTEwMDAwMAogICAgZXhwb3J0IEhJU1RGSUxFU0laRT0xMDAwMDAKICAgIGV4cG9ydCBQUk9NUFRfQ09NTUFORD0iaGlzdG9yeSAtYTsiCgogICAgIyBTb3VyY2UgZm9yIEdpdCBQUzEgZnVuY3Rpb24KICAgIGlmICEgdHlwZSAtdCBfX2dpdF9wczEgJiYgWyAtZSAiL3Vzci9zaGFyZS9naXQtY29yZS9jb250cmliL2NvbXBsZXRpb24vZ2l0LXByb21wdC5zaCIgXTsgdGhlbgogICAgICAgIC4gL3Vzci9zaGFyZS9naXQtY29yZS9jb250cmliL2NvbXBsZXRpb24vZ2l0LXByb21wdC5zaAogICAgZmkKCiAgICAjIENsb3VkOSBkZWZhdWx0IHByb21wdAogICAgX2Nsb3VkOV9wcm9tcHRfdXNlcigpIHsKICAgICAgICBpZiBbICIkQzlfVVNFUiIgPSByb290IF07IHRoZW4KICAgICAgICAgICAgZWNobyAiJFVTRVIiCiAgICAgICAgZWxzZQogICAgICAgICAgICBlY2hvICIkQzlfVVNFUiIKICAgICAgICBmaQogICAgfQoKICAgIFBTMT0nXFtcMDMzWzAxOzMybVxdJChfY2xvdWQ5X3Byb21wdF91c2VyKVxbXDAzM1swMG1cXTpcW1wwMzNbMDE7MzRtXF1cd1xbXDAzM1swMG1cXSQoX19naXRfcHMxICIgKCVzKSIgMj4vZGV2L251bGwpICQgJwpmaQoKRU9GCgogICAgY2hvd24gIiRVTklYX1VTRVIiOiIkVU5JWF9HUk9VUCIgIiRVTklYX1VTRVJfSE9NRSIvLmJhc2hyYwpmaQoKaWYgWyAiJEVOVklST05NRU5UX1BBVEgiID09ICIvaG9tZS9lYzItdXNlci9lbnZpcm9ubWVudCIgXSAmJiBbICEgLWYgIiRFTlZJUk9OTUVOVF9QQVRIIi9SRUFETUUubWQgXTsgdGhlbgogICAgY2F0IDw8J0VPRicgPj4gIiRFTlZJUk9OTUVOVF9QQVRIIi9SRUFETUUubWQKICAgICAgICAgX19fICAgICAgICBfX19fX18gICAgIF9fX18gXyAgICAgICAgICAgICAgICAgXyAgX19fCiAgICAgICAgLyBcIFwgICAgICAvIC8gX19ffCAgIC8gX19ffCB8IF9fXyAgXyAgIF8gIF9ffCB8LyBfIFwKICAgICAgIC8gXyBcIFwgL1wgLyAvXF9fXyBcICB8IHwgICB8IHwvIF8gXHwgfCB8IHwvIF9gIHwgKF8pIHwKICAgICAgLyBfX18gXCBWICBWIC8gIF9fXykgfCB8IHxfX198IHwgKF8pIHwgfF98IHwgKF98IHxcX18sIHwKICAgICAvXy8gICBcX1xfL1xfLyAgfF9fX18vICAgXF9fX198X3xcX19fLyBcX18sX3xcX18sX3wgIC9fLwogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgpIaSB0aGVyZSEgV2VsY29tZSB0byBBV1MgQ2xvdWQ5IQoKVG8gZ2V0IHN0YXJ0ZWQsIGNyZWF0ZSBzb21lIGZpbGVzLCBwbGF5IHdpdGggdGhlIHRlcm1pbmFsLApvciB2aXNpdCBodHRwczovL2RvY3MuYXdzLmFtYXpvbi5jb20vY29uc29sZS9jbG91ZDkvIGZvciBvdXIgZG9jdW1lbnRhdGlvbi4KCkhhcHB5IGNvZGluZyEKCkVPRgoKICAgIGNob3duICIkVU5JWF9VU0VSIjoiJFVOSVhfR1JPVVAiICIkVU5JWF9VU0VSX0hPTUUiL2Vudmlyb25tZW50L1JFQURNRS5tZApmaQoKIyBGaXggZm9yIHBlcm1pc3Npb24gZXJyb3Igd2hlbiB0cnlpbmcgdG8gY2FsbCBgZ2VtIGluc3RhbGxgCmNob3duICIkVU5JWF9VU0VSIiAtUiAvdXNyL2xvY2FsL3J2bS9nZW1zCgojVGhpcyBzY3JpcHQgaXMgYXBwZW5kZWQgdG8gYW5vdGhlciBiYXNoIHNjcmlwdCwgc28gaXQgZG9lcyBub3QgbmVlZCBhIGJhc2ggc2NyaXB0IGZpbGUgaGVhZGVyLgoKVU5JWF9VU0VSX0hPTUU9Ii9ob21lL2VjMi11c2VyIgoKQzlfRElSPSRVTklYX1VTRVJfSE9NRS8uYzkKQ09ORklHX0ZJTEVfUEFUSD0iJEM5X0RJUiIvYXV0b3NodXRkb3duLWNvbmZpZ3VyYXRpb24KVkZTX0NIRUNLX0ZJTEVfUEFUSD0iJEM5X0RJUiIvc3RvcC1pZi1pbmFjdGl2ZS5zaApDT05GSUdfTUVUUklDX0ZJTEVfUEFUSD0iJEM5X0RJUiIvYXV0b3NodXRkb3duLXRpbWVzdGFtcAoKZWNobyAiU0hVVERPV05fVElNRU9VVD0iID4gIiRDT05GSUdfRklMRV9QQVRIIgpjaG1vZCBhK3cgIiRDT05GSUdfRklMRV9QQVRIIgoKdG91Y2ggIiRDT05GSUdfTUVUUklDX0ZJTEVfUEFUSCIKY2htb2QgYSt3ciAiJENPTkZJR19NRVRSSUNfRklMRV9QQVRIIgoKZWNobyAtZSAnIyEvYmluL2Jhc2gKc2V0IC1ldW8gcGlwZWZhaWwKQ09ORklHPSQoY2F0ICckQ09ORklHX0ZJTEVfUEFUSCcpClNIVVRET1dOX1RJTUVPVVQ9JHtDT05GSUcjKj19CmlmICEgW1sgJFNIVVRET1dOX1RJTUVPVVQgPX4gXlswLTldKiQgXV07IHRoZW4KICAgIGVjaG8gInNodXRkb3duIHRpbWVvdXQgaXMgaW52YWxpZCIKICAgIGV4aXQgMQpmaQppc19zaHV0dGluZ19kb3duKCkgewogICAgaXNfc2h1dHRpbmdfZG93bl91YnVudHUgJj4gL2Rldi9udWxsIHx8IGlzX3NodXR0aW5nX2Rvd25fYWwxICY+IC9kZXYvbnVsbCB8fCBpc19zaHV0dGluZ19kb3duX2FsMiAmPiAvZGV2L251bGwKfQppc19zaHV0dGluZ19kb3duX3VidW50dSgpIHsKICAgIGxvY2FsIFRJTUVPVVQKICAgIFRJTUVPVVQ9JChidXNjdGwgZ2V0LXByb3BlcnR5IG9yZy5mcmVlZGVza3RvcC5sb2dpbjEgL29yZy9mcmVlZGVza3RvcC9sb2dpbjEgb3JnLmZyZWVkZXNrdG9wLmxvZ2luMS5NYW5hZ2VyIFNjaGVkdWxlZFNodXRkb3duKQogICAgaWYgWyAiJD8iIC1uZSAiMCIgXTsgdGhlbgogICAgICAgIHJldHVybiAxCiAgICBmaQogICAgaWYgWyAiJChlY2hvICRUSU1FT1VUIHwgYXdrICJ7cHJpbnQgXCQzfSIpIiA9PSAiMCIgXTsgdGhlbgogICAgICAgIHJldHVybiAxCiAgICBlbHNlCiAgICAgICAgcmV0dXJuIDAKICAgIGZpCn0KaXNfc2h1dHRpbmdfZG93bl9hbDEoKSB7CiAgICBwZ3JlcCBzaHV0ZG93bgp9CmlzX3NodXR0aW5nX2Rvd25fYWwyKCkgewogICAgbG9jYWwgRklMRQogICAgRklMRT0vcnVuL3N5c3RlbWQvc2h1dGRvd24vc2NoZWR1bGVkCiAgICBpZiBbWyAtZiAiJEZJTEUiIF1dOyB0aGVuCiAgICAgICAgcmV0dXJuIDAKICAgIGVsc2UKICAgICAgICByZXR1cm4gMQogICAgZmkKfQppc192ZnNfY29ubmVjdGVkKCkgewogICAgcGdyZXAgLWYgdmZzLXdvcmtlciA+L2Rldi9udWxsCn0KCmlmIGlzX3NodXR0aW5nX2Rvd247IHRoZW4KICAgIGlmIFtbICEgJFNIVVRET1dOX1RJTUVPVVQgPX4gXlswLTldKyQgXV0gfHwgaXNfdmZzX2Nvbm5lY3RlZDsgdGhlbgogICAgICAgIHN1ZG8gc2h1dGRvd24gLWMKICAgICAgICBlY2hvID4gIickQ09ORklHX01FVFJJQ19GSUxFX1BBVEgnIgogICAgZWxzZQogICAgICAgIFRJTUVTVEFNUD0kKGRhdGUgKyVzKQogICAgICAgIGVjaG8gIiRUSU1FU1RBTVAiID4gIickQ09ORklHX01FVFJJQ19GSUxFX1BBVEgnIgogICAgZmkKZWxzZQogICAgaWYgW1sgJFNIVVRET1dOX1RJTUVPVVQgPX4gXlswLTldKyQgXV0gJiYgISBpc192ZnNfY29ubmVjdGVkOyB0aGVuCiAgICAgICAgc3VkbyBzaHV0ZG93biAtaCAkU0hVVERPV05fVElNRU9VVAogICAgZmkKZmknID4gIiRWRlNfQ0hFQ0tfRklMRV9QQVRIIgoKY2htb2QgK3ggIiRWRlNfQ0hFQ0tfRklMRV9QQVRIIgoKZWNobyAiKiAqICogKiAqIHJvb3QgJFZGU19DSEVDS19GSUxFX1BBVEgiID4gL2V0Yy9jcm9uLmQvYzktYXV0b21hdGljLXNodXRkb3duCg==
      Tags:
        - Key: Name
          Value: aws-cloud9-Cloud9-Instance-ebf5d12539f04c6b8febb73145a70536
      NetworkInterfaces:
        - AssociatePublicIpAddress: true
          DeviceIndex: 0
          SubnetId: subnet-0a265c5cb4ab73c8e
          GroupSet:
            - !Ref InstanceSecurityGroup
          DeleteOnTermination: true
          Description: >-
            ENI for AWS Cloud9 environment
            aws-cloud9-Cloud9-Instance-ebf5d12539f04c6b8febb73145a70536
      BlockDeviceMappings:
        - DeviceName: /dev/xvda
          Ebs:
            VolumeType: gp3
  InstanceSecurityGroup:
    Type: 'AWS::EC2::SecurityGroup'
    Properties:
      GroupDescription: >-
        Security group for AWS Cloud9 environment
        aws-cloud9-Cloud9-Instance-ebf5d12539f04c6b8febb73145a70536
      VpcId: vpc-0a878c66a1fc904b3
      SecurityGroupIngress:
        - FromPort: 22
          ToPort: 22
          IpProtocol: tcp
          CidrIp: 35.172.155.192/27
        - FromPort: 22
          ToPort: 22
          IpProtocol: tcp
          CidrIp: 35.172.155.96/27
      Tags:
        - Key: Name
          Value: aws-cloud9-Cloud9-Instance-ebf5d12539f04c6b8febb73145a70536
